# Feature: 1.3.4 Provider and Model Lists

## Problem Statement

JidoCode needs functions to retrieve available providers and models for UI pick-lists:
- Return user-configured lists from settings if available
- Fall back to dynamic discovery via JidoAI if not configured
- Support filtering available options based on user preferences

### Impact Analysis
- **Scope**: Provider/model selection for TUI pick-lists
- **Dependencies**: Task 1.3.3 (Settings persistence) - completed, JidoAI provider system
- **Risk**: Low - wrapper functions with fallback logic

## Solution Overview

Add `get_providers/0` and `get_models/1` functions to the Settings module that:
1. Check settings for user-configured lists first
2. Fall back to `Jido.AI.Provider.providers/0` for providers
3. Fall back to provider's model list for models (requires research on JidoAI API)

### Priority Order

```
get_providers/0:
1. Settings "providers" list (if non-empty)
2. Jido.AI.Provider.providers/0 (dynamic discovery)

get_models/1:
1. Settings "models[provider]" list (if non-empty)
2. Provider's model list via JidoAI (dynamic discovery)
```

## Technical Details

### File Locations
- `lib/jido_code/settings.ex` - Add get_providers/0, get_models/1
- `test/jido_code/settings_test.exs` - Add provider/model list tests

### Key Design Decisions
1. Return list of strings for both providers and models
2. Empty list in settings = use fallback (not "no providers")
3. Handle JidoAI API gracefully if not available
4. Cache settings but not JidoAI discovery results

### API Design

```elixir
# Get available providers (from settings or JidoAI)
Settings.get_providers()
#=> ["anthropic", "openai", "openrouter"]

# Get available models for provider (from settings or JidoAI)
Settings.get_models("anthropic")
#=> ["claude-3-5-sonnet", "claude-3-opus"]

Settings.get_models("unknown_provider")
#=> []
```

## Success Criteria

- [x] `get_providers/0` returns settings list if configured
- [x] `get_providers/0` falls back to JidoAI if not configured
- [x] `get_models/1` returns settings list if configured
- [x] `get_models/1` falls back to JidoAI if not configured
- [x] Tests verify settings override dynamic discovery

## Implementation Plan

### Step 1: Implement get_providers/0
- [x] Check settings for "providers" key
- [x] Return settings list if non-empty
- [x] Fall back to Jido.AI.Provider.providers/0
- [x] Handle errors gracefully

### Step 2: Implement get_models/1
- [x] Check settings for "models[provider]" key
- [x] Return settings list if non-empty
- [x] Research JidoAI model list API
- [x] Fall back to provider's model list
- [x] Return empty list for unknown providers

### Step 3: Write tests
- [x] Test get_providers returns settings list
- [x] Test get_providers falls back when empty
- [x] Test get_models returns settings list
- [x] Test get_models falls back when empty
- [x] Test unknown provider returns empty list

## Current Status

**Status**: âœ… Complete
**Branch**: `feature/1.3.4-provider-model-lists`
