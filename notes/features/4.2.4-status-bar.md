# Feature 4.2.4: Status Bar Enhancements

## Problem Statement

The current status bar displays configuration and status as plain text. It lacks:
1. Colored status indicators (idle=green, processing=yellow, error=red)
2. Warning colors for unconfigured states
3. CoT indicator when reasoning steps are active
4. Full keyboard shortcut hints including Ctrl+M for model selection

**Impact**: Users can't quickly gauge system state at a glance; important states blend together.

## Solution Overview

Enhance the status bar with:
1. Color-coded status indicators
2. Warning styling for unconfigured states
3. CoT activity indicator
4. Complete keyboard shortcut hints

### Already Implemented
- `render_status_bar/1` component ✓
- Provider:model display ✓
- Basic status text (Idle/Processing/Error/Not Configured) ✓
- Ctrl+R and Ctrl+C hints ✓
- Reactive updates via view/1 ✓

### Needs Implementation
- Colored status indicators with status-specific styling
- Warning colors for "No provider" / "No model"
- CoT indicator (e.g., "[CoT]") when reasoning_steps not empty
- Add Ctrl+M hint for model selection (placeholder for future)

## Implementation Plan

### Step 1: Add Colored Status Indicators
- [x] 1.1 Create `status_style/1` helper for status-specific colors
- [x] 1.2 Idle → green text
- [x] 1.3 Processing → yellow text
- [x] 1.4 Error → red text
- [x] 1.5 Unconfigured → red/dim text

### Step 2: Add Warning Colors for Config States
- [x] 2.1 Create `config_style/1` helper for config warnings
- [x] 2.2 "No provider" → red/warning
- [x] 2.3 "(no model)" → yellow/warning
- [x] 2.4 Normal config → white/default

### Step 3: Add CoT Indicator
- [x] 3.1 Check if reasoning_steps is non-empty
- [x] 3.2 Display "[CoT]" indicator in magenta when active
- [x] 3.3 Position after status text

### Step 4: Update Keyboard Hints
- [x] 4.1 Add "Ctrl+M: Model" placeholder hint
- [x] 4.2 Update hint ordering for consistency

### Step 5: Refactor Status Bar Rendering
- [x] 5.1 Use multi-segment approach for mixed colors
- [x] 5.2 Build status bar as horizontal stack of styled segments

### Step 6: Write Tests
- [x] 6.1 Test status color for each state
- [x] 6.2 Test config warning colors
- [x] 6.3 Test CoT indicator presence
- [x] 6.4 Test keyboard hints content

### Step 7: Documentation
- [x] 7.1 Update phase-04.md marking task complete
- [x] 7.2 Write summary document

## Technical Details

### Status Bar Segments

The status bar will be rendered as segments with individual styles:
```
[config_segment] | [status_segment] [cot_indicator] | [hints_segment]
```

### Color Scheme

| Element | Color | When |
|---------|-------|------|
| Config (normal) | white | provider and model set |
| Config (no provider) | red | provider is nil |
| Config (no model) | yellow | model is nil |
| Status: Idle | green | :idle |
| Status: Processing | yellow | :processing |
| Status: Error | red | :error |
| Status: Unconfigured | red (dim) | :unconfigured |
| CoT Indicator | magenta | reasoning_steps not empty |
| Hints | bright_black | always |

### Example Output

Normal state:
```
anthropic:claude-3-5-sonnet | Idle | Ctrl+R: Reasoning | Ctrl+M: Model | Ctrl+C: Quit
```

Processing with CoT:
```
anthropic:claude-3-5-sonnet | Processing... [CoT] | Ctrl+R: Hide | Ctrl+M: Model | Ctrl+C: Quit
```

Unconfigured:
```
No provider | Not Configured | Ctrl+R: Reasoning | Ctrl+M: Model | Ctrl+C: Quit
```

## Success Criteria

1. Status indicators display with correct colors
2. Unconfigured states show warning colors
3. CoT indicator appears when reasoning active
4. All keyboard hints present
5. All tests pass
6. Credo checks pass

## Current Status

**Status**: Complete
**What Works**: Status bar with colored indicators, CoT indicator, full keyboard hints
**What's Next**: Task 4.3.1 TermUI Pick-List Widget
**How to Run**: `mix test test/jido_code/tui_test.exs`
