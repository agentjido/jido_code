# Feature: 4.2.4 TUI Status Bar Enhancement

## Problem Statement

Task 4.2.4 requires enhancing the status bar to display current configuration and agent status with proper color-coded indicators. The status bar should clearly communicate:
- Provider and model configuration
- Warning states when unconfigured
- Agent status with semantic colors
- CoT reasoning indicator
- Keyboard shortcut hints

## Solution Overview

### Current Implementation

A basic `render_status_bar/1` already exists that displays:
- Config text (provider:model or "No provider configured")
- Status indicator (text only: Idle, Processing, Error, Not Configured)
- CoT indicator when active
- Basic "Ctrl+C: Quit" hint

### Enhancements Needed

1. **Colored Status Indicators**: Replace text-only status with colored indicators
   - Idle: green
   - Processing: yellow
   - Error: red
   - Unconfigured: red/dim

2. **Warning Colors for Unconfigured States**:
   - "No provider configured" in red/warning style
   - "No model selected" in yellow/warning style

3. **Full Keyboard Shortcut Hints**:
   - "Ctrl+M: Model | Ctrl+R: Reasoning | Ctrl+C: Quit"

4. **Segmented Status Bar**: Use multiple text segments with different styles instead of single styled text

## Implementation Plan

### Step 1: Create Planning Document
- [x] 1.1 Create this planning document

### Step 2: Refactor Status Bar to Use Segments
- [x] 2.1 Change `render_status_bar/1` to return a horizontal stack of styled segments
- [x] 2.2 Create `render_config_segment/1` for provider:model display
- [x] 2.3 Create `render_status_segment/1` for colored status indicator
- [x] 2.4 Create `render_cot_segment/1` for CoT display
- [x] 2.5 Create `render_hints_segment/0` for keyboard hints

### Step 3: Implement Colored Status Indicators
- [x] 3.1 Add status_indicator_style/1 helper returning style for each status
- [x] 3.2 Idle: green foreground with ● indicator
- [x] 3.3 Processing: yellow foreground with ● indicator
- [x] 3.4 Error: red foreground with ● indicator
- [x] 3.5 Unconfigured: bright_black (dim) foreground with ○ indicator

### Step 4: Implement Warning Colors for Config
- [x] 4.1 "No provider configured": red foreground
- [x] 4.2 "provider (no model)": yellow foreground
- [x] 4.3 "provider:model": white/default foreground

### Step 5: Update Keyboard Hints
- [x] 5.1 Change hints to "Ctrl+M: Model | Ctrl+R: Reasoning | Ctrl+C: Quit"

### Step 6: Write Tests
- [x] 6.1 Test status bar shows colored idle indicator
- [x] 6.2 Test status bar shows colored processing indicator
- [x] 6.3 Test status bar shows colored error indicator
- [x] 6.4 Test status bar shows colored unconfigured indicator
- [x] 6.5 Test "No provider configured" has warning color
- [x] 6.6 Test "no model" has warning color
- [x] 6.7 Test keyboard hints include Ctrl+M and Ctrl+R

### Step 7: Verify
- [x] 7.1 Run `mix compile` successfully
- [x] 7.2 Run `mix test` - all tests pass (75 total)

## Technical Notes

### Status Colors

| Status | Color | Style |
|--------|-------|-------|
| Idle | green | fg: :green |
| Processing | yellow | fg: :yellow |
| Error | red | fg: :red |
| Unconfigured | dim red | fg: :bright_black |

### Config Colors

| State | Color | Style |
|-------|-------|-------|
| No provider | red | fg: :red |
| No model | yellow | fg: :yellow |
| Configured | white | fg: :white |

### Status Bar Layout

```
┌──────────────────────────────────────────────────────────────────────────────┐
│ provider:model | ● Idle | CoT: 1/3 | Ctrl+M: Model | Ctrl+R: Reasoning | Ctrl+C: Quit │
└──────────────────────────────────────────────────────────────────────────────┘
```

With colored segments:
- Config segment: white (or red/yellow for warnings)
- Status segment: colored based on status
- CoT segment: magenta
- Hints segment: bright_black (dim)

## Success Criteria

1. Status indicators are color-coded (green/yellow/red)
2. Unconfigured states show warning colors
3. Keyboard hints include all shortcuts
4. All existing tests still pass
5. New tests for colored indicators pass

## Current Status

**Status**: Complete
