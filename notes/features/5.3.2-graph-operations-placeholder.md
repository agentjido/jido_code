# Feature: 5.3.2 Graph Operations Placeholder

## Problem Statement

The Knowledge Graph Foundation needs libgraph-based infrastructure for in-memory graph algorithms. This task creates placeholder modules with stub functions that integrate with the existing RDF infrastructure from task 5.3.1. The goal is to establish the libgraph wrapper and define the schema for code relationships.

## Solution Overview

Create the following:
1. `JidoCode.KnowledgeGraph.InMemory` - libgraph wrapper for in-memory graph operations
2. Graph schema defining vertex types and edge labels for code relationships
3. Stub functions returning placeholders for future implementation
4. Placeholder module for future GraphRAG integration

## Technical Details

### Dependencies
- `libgraph` ~> 0.16 (already in mix.exs)

### Files to Create
- `lib/jido_code/knowledge_graph/in_memory.ex` - libgraph wrapper
- `lib/jido_code/knowledge_graph/graph_rag.ex` - GraphRAG placeholder
- `test/jido_code/knowledge_graph/in_memory_test.exs` - InMemory tests

### Graph Schema Design

Vertex types correspond to Entity types:
- Module, Function, Type, Protocol, Behaviour, Macro, Struct, Exception

Edge types (relationships):
- `:defines` - Module defines an entity
- `:calls` - Function calls another function
- `:imports` - Module imports from another module
- `:uses` - Module uses a behaviour or protocol
- `:implements` - Module implements a protocol
- `:depends_on` - General dependency relationship
- `:supervises` - Supervision relationship
- `:aliases` - Module aliases another module

### libgraph API Usage

From hexdocs:
- `Graph.new(type: :directed)` - Create directed graph
- `Graph.add_vertex(g, v, labels)` - Add vertex with labels
- `Graph.add_edge(g, v1, v2, label: l)` - Add labeled edge
- `Graph.vertices(g)` - Get all vertices
- `Graph.edges(g)` - Get all edges
- `Graph.neighbors(g, v)` - Get adjacent vertices
- `Graph.out_neighbors(g, v)` - Get outbound neighbors

## Implementation Plan

### Step 1: Create InMemory module
- [x] 1.1 Create `JidoCode.KnowledgeGraph.InMemory` with moduledoc
- [x] 1.2 Define `@edge_types` for valid relationship types
- [x] 1.3 Implement `new/0` to create empty directed graph

### Step 2: Implement stub functions
- [x] 2.1 Implement `build_dependency_graph/1` returning `{:error, :not_implemented}`
- [x] 2.2 Implement `find_related_entities/2` returning `{:error, :not_implemented}`
- [x] 2.3 Implement `add_entity/2` returning `{:error, :not_implemented}`
- [x] 2.4 Implement `add_relationship/4` returning `{:error, :not_implemented}`

### Step 3: Add working graph helpers
- [x] 3.1 Implement `empty?/1` to check if graph is empty
- [x] 3.2 Implement `vertex_count/1` to count vertices
- [x] 3.3 Implement `edge_count/1` to count edges

### Step 4: Create GraphRAG placeholder
- [x] 4.1 Create `JidoCode.KnowledgeGraph.GraphRAG` module with documentation
- [x] 4.2 Add stub `query/2` returning `{:error, :not_implemented}`
- [x] 4.3 Add stub `build_context/2` returning `{:error, :not_implemented}`

### Step 5: Write tests
- [x] 5.1 Test graph creation with `Graph.new`
- [x] 5.2 Test basic graph operations (add vertex, add edge)
- [x] 5.3 Test graph traversal (neighbors, edges)
- [x] 5.4 Test stub functions return `{:error, :not_implemented}`
- [x] 5.5 Test helper functions (empty?, vertex_count, edge_count)

## Success Criteria

1. All modules compile without errors
2. libgraph Graph can be created and basic operations work
3. Graph schema for code relationships is defined
4. Stub functions return `{:error, :not_implemented}` tuple
5. GraphRAG placeholder module exists
6. All tests pass

## Current Status

**Status**: Complete
**What Works**: All modules implemented and tested
- InMemory module with libgraph wrapper (new/0, empty?/1, vertex_count/1, edge_count/1)
- Graph schema with 8 edge types and 8 entity types
- Stub functions for future implementation (build_dependency_graph, find_related_entities, add_entity, add_relationship)
- GraphRAG placeholder with stub functions (query, build_context, rank_entities)
- 25 tests covering libgraph operations and stub functions
- 954 total tests passing
