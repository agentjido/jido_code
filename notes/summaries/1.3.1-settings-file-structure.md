# Summary: Task 1.3.1 - Settings File Structure

## Overview

Implemented the `JidoCode.Settings` module with path helpers, JSON schema validation, directory creation, and file reading capabilities. This provides the foundation for the two-level settings system.

## Changes Made

### New Files Created
- `lib/jido_code/settings.ex` - Settings module
- `test/jido_code/settings_test.exs` - 29 tests for settings functionality

### JidoCode.Settings Module

**Path Helpers:**
- `global_dir/0` - Returns `~/.jido_code`
- `global_path/0` - Returns `~/.jido_code/settings.json`
- `local_dir/0` - Returns `./jido_code`
- `local_path/0` - Returns `./jido_code/settings.json`

**Schema Validation:**
- `validate/1` - Validates settings map against schema
- Valid keys: `provider`, `model`, `providers`, `models`
- Returns `{:ok, settings}` or `{:error, reason}`

**Directory Management:**
- `ensure_global_dir/0` - Creates `~/.jido_code/` if needed
- `ensure_local_dir/0` - Creates `./jido_code/` if needed

**File Reading:**
- `read_file/1` - Reads and parses JSON settings file
- Returns `{:ok, map}`, `{:error, :not_found}`, or `{:error, {:invalid_json, reason}}`

### Settings JSON Schema

```json
{
  "provider": "anthropic",
  "model": "claude-3-5-sonnet",
  "providers": ["anthropic", "openai", "openrouter"],
  "models": {
    "anthropic": ["claude-3-5-sonnet", "claude-3-opus"],
    "openai": ["gpt-4o", "gpt-4-turbo"]
  }
}
```

All keys are optional. Validation enforces:
- `provider` - string
- `model` - string
- `providers` - list of strings
- `models` - map of string to list of strings

### Tests Added (29 tests)

**Path helper tests (4):**
- global_dir returns path in user home
- global_path returns settings.json in global dir
- local_dir returns path in current directory
- local_path returns settings.json in local dir

**Valid settings tests (8):**
- Accepts empty map
- Accepts valid provider/model strings
- Accepts valid providers list
- Accepts valid models map
- Accepts complete valid settings

**Invalid settings tests (10):**
- Rejects non-map input
- Rejects unknown keys
- Rejects non-string provider/model
- Rejects invalid providers list
- Rejects invalid models map

**Directory tests (2):**
- Creates global directory
- Creates local directory

**File reading tests (5):**
- Reads valid JSON file
- Reads empty JSON object
- Returns error for non-existent file
- Returns error for invalid JSON
- Returns error for non-object JSON

## Verification

- `mix test` - 68 tests, 0 failures (29 new)
- No compiler warnings

## Usage Example

```elixir
# Get paths
JidoCode.Settings.global_path()
#=> "/home/user/.jido_code/settings.json"

# Validate settings
JidoCode.Settings.validate(%{"provider" => "anthropic"})
#=> {:ok, %{"provider" => "anthropic"}}

# Ensure directory exists
JidoCode.Settings.ensure_global_dir()
#=> :ok

# Read settings file
JidoCode.Settings.read_file(JidoCode.Settings.global_path())
#=> {:ok, %{"provider" => "anthropic"}} or {:error, :not_found}
```

## Notes

- Task 1.3.2 will add `load/0` for merging global + local settings
- Task 1.3.3 will add `save/2` for persisting settings

## Next Steps

Task 1.3.2 - Settings Loading and Merging (load/0, get/1, get/2, caching)
