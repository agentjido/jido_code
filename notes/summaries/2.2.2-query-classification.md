# Summary: Task 2.2.2 Query Classification

## Overview

Created `JidoCode.Reasoning.QueryClassifier` module that determines when Chain-of-Thought reasoning should be used based on query complexity analysis.

## Changes Made

### New Files

1. **`lib/jido_code/reasoning/query_classifier.ex`**
   - `should_use_cot?/1` - Returns boolean based on query complexity
   - `classify/2` - Classifies with optional force_cot override
   - `analyze/1` - Returns detailed score and reasons for debugging
   - Complexity keyword matching
   - Code block detection
   - Long query detection
   - Multiple question detection
   - Simplicity pattern matching

2. **`test/jido_code/reasoning/query_classifier_test.exs`**
   - 30 tests covering all classification scenarios
   - 42 complex query examples
   - 31 simple query examples
   - Accuracy verification tests

### Classification Heuristics

**Complex queries (use CoT):**
- Keywords: debug, fix, explain, how to, implement, compare, optimize, refactor
- Code blocks (triple backticks)
- Error messages and stack traces
- Long queries (>100 characters)
- Multiple questions

**Simple queries (direct response):**
- Greetings: hi, hello, hey, thanks
- Confirmations: yes, no, ok, got it
- Single words
- Very short queries (<20 characters)

## Test Results

```
203 tests, 0 failures, 1 skipped
```

Accuracy tests verify 90%+ correct classification on test set.

## API Usage

```elixir
# Check if CoT should be used
JidoCode.Reasoning.QueryClassifier.should_use_cot?("How do I implement a GenServer?")
# => true

JidoCode.Reasoning.QueryClassifier.should_use_cot?("hello")
# => false

# Force CoT on/off
JidoCode.Reasoning.QueryClassifier.classify("hello", force_cot: true)
# => true

# Get detailed analysis for debugging
JidoCode.Reasoning.QueryClassifier.analyze("How do I debug this error?")
# => %{score: 2, reasons: ["keyword: debug", "keyword: error"], should_use_cot: true}
```

## Integration with ChainOfThought

The QueryClassifier can be used with the ChainOfThought module:

```elixir
alias JidoCode.Reasoning.{ChainOfThought, QueryClassifier}

def chat_with_reasoning(agent, query) do
  if QueryClassifier.should_use_cot?(query) do
    ChainOfThought.run_with_reasoning(agent, query)
  else
    LLMAgent.chat(agent, query)
  end
end
```

## Phase Plan Updated

Task 2.2.2 marked complete in `notes/planning/proof-of-concept/phase-02.md`
